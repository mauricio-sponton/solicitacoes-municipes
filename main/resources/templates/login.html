<!DOCTYPE html>
<html lang="pt" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
<head>
<title>Vereador Rutinaldo Bastos: Login</title>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
	<link rel="icon" type="image/png" sizes="32x32" th:href="@{/image/favicon-32x32.png}">
<link rel="icon" type="image/png" sizes="16x16" th:href="@{/image/favicon-16x16.png}">

<!-- Icons fontawesome -->
<link href="https://use.fontawesome.com/releases/v5.7.2/css/all.css"
	crossorigin="anonymous" rel="stylesheet" />

<!-- Custom styles for this template -->
<link
	th:href="@{/webjars/bootstrap/css/bootstrap.min.css(v=${version}) }"
	rel="stylesheet" />
<link th:href="@{/css/style-login.css(v=${version})}" rel="stylesheet" />

</head>
<body>

	

	<form th:action="@{/login}" method="post" id="login-form">
	<div  th:if="${expirado != null}" id="mensagem-expirada"
		th:class="${expirado == 'erro'} ? 'alert alert-danger alert-dismissible fade show' : 'alert alert-success'"
		role="alert">
		<i class="oi oi-check"></i>
		<p th:text="${titulo}" style="font-size: 20px" class="alert-heading mb-1">Credenciais...</p>
		<p class="mb-0" th:text="${texto + ' ' + subtexto}">Login ou senha incorretos...</p>
		
		
		<a role="button" class="close" th:href="@{/login}"> <span
			aria-hidden="true">&times;</span></a>
	</div>
		<h1>Login</h1>
		<div th:replace="fragments/alert :: alerta-sucesso"></div>
		<div class="inputWithIcon">
			<label for="inputEmail">E-mail</label> 
  			<input type="text" placeholder="Digite seu e-mail" id="inputEmail" name="username" class="input-login" autofocus>
  			<i class="fa fa-envelope fa-lg fa-fw" aria-hidden="true"></i>
  			<div class="invalid-feedback">
				<span>Use seu email cadastrado como login.</span>
			</div>
		</div>
		
		<div class="inputWithIcon">
			<label for="inputPassword">Senha</label> 
		  	<input type="password" id="inputPassword" placeholder="Digite sua senha." name="password" class="input-login" autofocus>
  			<i class="fas fa-lock fa-lg fa-fw" aria-hidden="true"></i>
  			<div id="wrap" class="field-wrapper">
				<span toggle="#inputPassword"
					class="fa fa-fw fa-eye field-icon toggle-password"></span>
			</div>
		</div>

		<!--<div class="login">
			<label for="inputEmail" class="label-login">E-mail</label> <input
				type="text" id="inputEmail" class="input-login"
				placeholder="Email" name="username" autofocus> <i
				class="fas fa-envelope"></i>
			<div class="invalid-feedback">
				<span>Use seu email cadastrado como login.</span>
			</div>
		</div>

		<div class="login">

			<label for="inputPassword" class="label-login">Senha</label> <input
				type="password" id="inputPassword" class="input-login"
				placeholder="Senha" name="password"> <i class="fas fa-lock"></i>
			<div id="wrap" class="field-wrapper">
				<span toggle="#inputPassword"
					class="fa fa-fw fa-eye field-icon toggle-password"></span>
			</div>-->

		<div class="invalid-feedback">
			<span>Digite sua senha.</span>
		</div>


		<div class="remember-me">
			<label> <input type="checkbox" id="remember-me"
				name="remember-me" /> Lembre de mim
			</label>
		</div>
		<button class="btn-login" type="submit">Entrar</button>
		<nav class="nav nav-pills flex-column flex-sm-row chave">
			<a class="flex-sm-fill text-sm-left nav-link text-decoration-none"
				th:href="@{/u/p/redefinir/senha}"><i class="fas fa-key"></i>&nbsp;Recuperar
				senha</a>
		</nav>

	</form>
	
	<div id="mensagem-login" th:if="${alerta != null}"
		th:class="${alerta == 'erro'} ? 'alert alert-danger alert-dismissible fade show' : 'alert alert-success'"
		role="alert">
		<i class="oi oi-check"></i>
		<h4 th:text="${titulo}" class="alert-heading">Credenciais...</h4>
		<p th:text="${texto}">Login ou senha incorretos...</p>
		<hr>
		<p class="mb-0">
			<small th:text="${subtexto}">Acesso permitido...</small>
		</p>
		<a role="button" class="close" th:href="@{/login}"> <span
			aria-hidden="true">&times;</span></a>
	</div>
	<script th:src="@{/webjars/jquery/jquery.min.js(v=${version}) }"></script>
	<script
		th:src="@{/webjars/bootstrap/js/bootstrap.min.js(v=${version}) }"></script>
	<script type="text/javascript">
		
		
		$(document).ready(function() {
			if ($('#mensagem-login h4').text() != "") {
				$('#inputEmail, #inputPassword').addClass('is-invalid');
				$(".invalid-feedback").show();
				$(".invalid-feedback").css("color", "red");
				$("#wrap").css("padding", "9px 9px 10px 9px");
				$(".is-invalid, #wrap").css("border", "1px solid red");
				$('.input-login').focus(function() {
					$(this).css("box-shadow", "none")
				})
			}
			
// 			if(expirado == "erro"){
// 				$("#modal-expirado").modal('show');	 
// 			}
			
		})
		$(".toggle-password").click(function() {

			$(this).toggleClass("fa-eye fa-eye-slash");
			var input = $($(this).attr("toggle"));
			if (input.attr("type") == "password") {
				input.attr("type", "text");
			} else {
				input.attr("type", "password");
			}
		});
	</script>
</body>
</html>
